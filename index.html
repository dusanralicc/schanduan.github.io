<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dusan Ralic IV</title>
    <style>
        .example {
            width: 200px;
            height: 200px;
            margin: 10px;            
            display: inline-block;
        }
        .box {
            width: 100%;
            height: 100%;
        }
        img.box {
            width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="example-4" class="example" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)">
        <a href="#" class="play">
            <div class="box">
                <img src="Asset 1.png" class="box" id="img1">
            </div>
        </a>
    </div>

    <div id="example-5" class="example" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)">
        <a href="#" class="play">
            <div class="box">
                <img src="Asset 2.png" class="box" id="img2">
            </div>
        </a>
    </div>
<br>
    <div id="example-6" class="example" draggable="true" ondragstart="drag(event)" ondragover="allowDrop(event)" ondrop="drop(event)">
        <a href="#" class="play">
            <div class="box">
                <img src="Asset 3.png" class="box" id="img3">
            </div>
        </a>
    </div>

    <script>
        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }

        function drop(event) {
            event.preventDefault();
            const draggedElementId = event.dataTransfer.getData("text");
            const targetElement = event.target;

            if (targetElement.tagName.toLowerCase() === 'img' && targetElement.classList.contains('box')) {
                const draggedElement = document.getElementById(draggedElementId);
                
                const targetSrc = targetElement.src;
                const draggedSrc = draggedElement.src;

                
                draggedElement.src = targetSrc;
                targetElement.src = draggedSrc;

                
                const draggedRotation = draggedElement.dataset.rotation || 0;
                const targetRotation = targetElement.dataset.rotation || 0;

                draggedElement.style.transform = `rotate(${targetRotation}deg)`;
                targetElement.style.transform = `rotate(${draggedRotation}deg)`;

                draggedElement.dataset.rotation = targetRotation;
                targetElement.dataset.rotation = draggedRotation;
            }
        }

        function $(selector) {
            return document.querySelectorAll(selector)[0];
        }

        function play(example, fn) {
            $('#example-' + example + ' .play').addEventListener('click', function(e){
                e.preventDefault();
                fn();
            }, false);
        }

        function createRotator(exampleId, initialRotation = 0) {
            const element = document.querySelector(`#example-${exampleId} .box img`);
            let currentRotation = initialRotation;

            return {
                rotate: function(deg) {
                    currentRotation = (currentRotation + deg) % 360;
                    element.style.transform = `rotate(${currentRotation}deg)`;
                    element.dataset.rotation = currentRotation;
                    return this;
                },
                end: function() {}
            };
        }

        // example 4
        var e4 = createRotator(4);
        play(4, function(){
            e4.rotate(45).end();
        });

        // example 5
        var e5 = createRotator(5);
        play(5, function(){
            e5.rotate(90).end();
        });

        // example 6
        var e6 = createRotator(6);
        play(6, function(){
            e6.rotate(180).end();
        });
    </script>
</body>
</html>
